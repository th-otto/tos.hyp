<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<title>
The documentation for TOS: Scrap library
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO 7.04 (1296) for Linux">
</head>
<body>
<? include "/var/www/banner.php"; ?>

<a id="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a><a id="UDO_nav_up_HEAD" href="008.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24"></a><a id="UDO_nav_lf_HEAD" href="00800c.html"><img src="udo_lf.gif" alt="Graphics library" title="Graphics library" border="0" width="24" height="24"></a><a id="UDO_nav_rg_HEAD" href="00800e.html"><img src="udo_rg.gif" alt="List boxes" title="List boxes" border="0" width="24" height="24"></a>
<hr>

<h1><a name="Scrap_20library"></a>8.13 Scrap library</h1>
<p>This library makes functions available that permit a standardized
interchange of data betweeen various applications. The following
routines are present for this purpose:</p>

<table>
<tr><td nowrap="nowrap" valign="top">• <a href="#scrp_clear">scrp_clear</a></td>
<td valign="top">Deletes files in the clipboard</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#scrp_read">scrp_read</a></td>
<td valign="top">Obtains path of the clipboard</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#scrp_write">scrp_write</a></td>
<td valign="top">Sets path of the clipboard

</td></tr>
</table>

<p><b>Note:</b> Besides these functions, some other particulars have
to be taken into account for <a href="008002.html#Data_20exchange_20via_20the_20GEM_20clipboard">exchanging data via the clipboard</a>.</p>

<p>See also: <a href="008007.html#Messages">Messages</a> &nbsp; <a href="008007.html#SC_CHANGED">SC_CHANGED</a> &nbsp; <a href="008007.html#SH_WDRAW">SH_WDRAW</a> &nbsp; <a href="00a002.html">Style guidelines</a></p>

<h3><a name="scrp_clear"></a>8.13.1 scrp_clear</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Scrap clear« - Delete the contents of the clipboard.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">82</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int16_t scrp_clear ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung_</td>
<td valign="top">The call scrp_clear deletes all files in the current clipboard.<br><br>

<b>Warning:</b> Contrary to the usual conventions, really
<i>all</i> files will be deleted, not just those matching the mask
"scrap.*".</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> An error has arisen only if the value 0 is returned.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">The function is available only under PC-GEM, KAOS 1.4.2 and
<a href="00b.html">MagiC</a>. Not present in ViewMAX.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Scrap_20library">Scrap library</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="scrp_clear.html#Bindings_20for_20scrp_clear">Binding</a> &nbsp; <a href="008002.html#Data_20exchange_20via_20the_20GEM_20clipboard">Data exchange via the GEM clipboard</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20scrp_clear"></a>8.13.1.1 Bindings for scrp_clear</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#scrp_clear">scrp_clear</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top"><pre>int16_t <a href="#scrp_clear">scrp_clear</a> (void)
{
   return ( <a href="008002.html#crys_if">crys_if</a>(82) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="002002.html">GEM</a>-Arrays:</td>
<td valign="top"><br><br>


<div align="left">
<table border="0">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a></td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[0]</td>
  <td align="left" valign="top">82    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+2</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[1]</td>
  <td align="left" valign="top">0     # Entry in <a href="008002.html#int_in">int_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+4</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[2]</td>
  <td align="left" valign="top">1     # Entry in <a href="008002.html#int_out">int_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+6</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[3]</td>
  <td align="left" valign="top">0     # Entry in <a href="008002.html#addr_in">addr_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+8</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[4]</td>
  <td align="left" valign="top">0     # Entry in <a href="008002.html#addr_out">addr_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a></td>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a>[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>



</td></tr>
</table>

<h3><a name="scrp_read"></a>8.13.2 scrp_read</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Scrap read« - Obtain pathname of the clipboard.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">80</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int16_t scrp_read ( int8_t *sc_rpscrap );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The call scrp_read obtains the current directory which is being
used for temporary storage (the clipboard).<br><br>

<b>Note:</b> The clipboard directory path will lie in the
parameter <i>sc_rpscrap</i> after the call. One must be sure that the
receiving buffer is large enough for this.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> An error has arisen only if the value 0 is returned.<br><br>

To quote Mike Fulton, Atari Computer:
<br>"The scrp_read function is defined as possibly returning an
error-code of zero. However, this function currently always returns a
value of 1. Since this may change in future versions of GEM
AES, applications should handle the case of the error-code even if
the programmer does not expect to see it."<br><br>

As of PC-GEM Version 2.0 however the following values are
returned: -1, if no path has been set yet; values >= 0 are to be taken
as a bit-vector that is meant to provide information about the found
file types. The following assignments apply:<a name="SCRAP_CSV"></a>
<a name="SCRAP_TXT"></a>
<a name="SCRAP_GEM"></a>
<a name="SCRAP_IMG"></a>
<a name="SCRAP_DCA"></a>
<a name="SCRAP_USR"></a>
<br><br>


<div align="left">
<table border="0">
<tr>
  <td align="left" valign="top">SCRAP_CSV</td>
  <td align="left" valign="top">0x0001</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.csv</td>
</tr>
<tr>
  <td align="left" valign="top">SCRAP_TXT</td>
  <td align="left" valign="top">0x0002</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.txt</td>
</tr>
<tr>
  <td align="left" valign="top">SCRAP_GEM</td>
  <td align="left" valign="top">0x0004</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.gem</td>
</tr>
<tr>
  <td align="left" valign="top">SCRAP_IMG</td>
  <td align="left" valign="top">0x0008</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.img</td>
</tr>
<tr>
  <td align="left" valign="top">SCRAP_DCA</td>
  <td align="left" valign="top">0x0010</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.dca</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">0x0020</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.dif (see Note)</td>
</tr>
<tr>
  <td align="left" valign="top">SCRAP_USR</td>
  <td align="left" valign="top">0x8000</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.usr</td>
</tr>
</table>
</div>

<br><br>

All other bits are reserved for future purposes.<br><br>

<b>Note:</b> According to the docs for PC-GEM, scrap.usr is
coded in bit 5, though the AES source text says bit 15.<br><br>

The library from the book <i>Vom Anfänger zum GEM-Profi</i>
allocates bit 5 to DIF files. The extension is unofficial and works
only if that library is used for the build.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All AES versions, not present in ViewMAX.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Scrap_20library">Scrap library</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20scrp_read">Binding</a> &nbsp; <a href="#scrp_write">scrp_write</a> &nbsp; <a href="008002.html#Data_20exchange_20via_20the_20GEM_20clipboard">Data exchange via the GEM clipboard</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20scrp_read"></a>8.13.2.1 Bindings for scrp_read</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#scrp_read">scrp_read</a> ( int8_t *sc_rpscrap );</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top"><pre>int16_t <a href="#scrp_read">scrp_read</a> (int8_t *sc_rpscrap)
{
   <a href="008002.html#addr_in">addr_in</a>[0] = sc_rpscrap;
   return ( <a href="008002.html#crys_if">crys_if</a>(80) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="002002.html">GEM</a>-Arrays:</td>
<td valign="top"><br><br>


<div align="left">
<table border="0">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a></td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[0]</td>
  <td align="left" valign="top">80    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+2</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[1]</td>
  <td align="left" valign="top">0     # Entry in <a href="008002.html#int_in">int_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+4</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[2]</td>
  <td align="left" valign="top">1     # Entry in <a href="008002.html#int_out">int_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+6</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[3]</td>
  <td align="left" valign="top">1     # Entry in <a href="008002.html#addr_in">addr_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+8</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[4]</td>
  <td align="left" valign="top">0     # Entry in <a href="008002.html#addr_out">addr_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#addr_in">addr_in</a></td>
  <td align="left" valign="top"><a href="008002.html#addr_in">addr_in</a>[0]</td>
  <td align="left" valign="top">sc_rpscrap</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a></td>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a>[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>



</td></tr>
</table>

<h3><a name="scrp_write"></a>8.13.3 scrp_write</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Scrap write« - Set path of the clipboard.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">81</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int16_t scrp_write ( int8_t *sc_wpscrap );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The call scrp_write sets the directory that is to be used for
temorary storage (the clipboard).<br><br>

<b>Note:</b> The name of the new path is passed in the parameter
<i>sc_wpscrap.</i> The clipboard should carry the name CLIPBRD, and
should lie on the boot drive in each case.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> An error has arisen only if the value 0 is returned.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All AES versions, not present in ViewMAX.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Scrap_20library">Scrap library</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20scrp_write">Binding</a> &nbsp; <a href="#scrp_read">scrp_read</a> &nbsp; <a href="008002.html#Data_20exchange_20via_20the_20GEM_20clipboard">Data exchange via the GEM clipboard</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20scrp_write"></a>8.13.3.1 Bindings for scrp_write</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#scrp_write">scrp_write</a> ( int8_t *sc_wpscrap );</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top"><pre>int16_t <a href="#scrp_write">scrp_write</a> (int8_t *sc_wpscrap)
{
   <a href="008002.html#addr_in">addr_in</a>[0] = sc_wpscrap;
   return ( <a href="008002.html#crys_if">crys_if</a>(81) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="002002.html">GEM</a>-Arrays:</td>
<td valign="top"><br><br>


<div align="left">
<table border="0">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a></td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[0]</td>
  <td align="left" valign="top">81    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+2</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[1]</td>
  <td align="left" valign="top">0     # Entry in <a href="008002.html#int_in">int_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+4</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[2]</td>
  <td align="left" valign="top">1     # Entry in <a href="008002.html#int_out">int_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+6</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[3]</td>
  <td align="left" valign="top">1     # Entry in <a href="008002.html#addr_in">addr_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+8</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[4]</td>
  <td align="left" valign="top">0     # Entry in <a href="008002.html#addr_out">addr_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#addr_in">addr_in</a></td>
  <td align="left" valign="top"><a href="008002.html#addr_in">addr_in</a>[0]</td>
  <td align="left" valign="top">sc_wpscrap</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a></td>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a>[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>



</td></tr>
</table>

<hr>

<a id="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a><a id="UDO_nav_up_FOOT" href="008.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24"></a><a id="UDO_nav_lf_FOOT" href="00800c.html"><img src="udo_lf.gif" alt="Graphics library" title="Graphics library" border="0" width="24" height="24"></a><a id="UDO_nav_rg_FOOT" href="00800e.html"><img src="udo_rg.gif" alt="List boxes" title="List boxes" border="0" width="24" height="24"></a></body>
</html>
