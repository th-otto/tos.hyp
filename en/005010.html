<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<title>
The documentation for TOS: Character input/output
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO 7.04 (1296) for Linux">
</head>
<body>
<? include "/var/www/banner.php"; ?>

<a id="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a><a id="UDO_nav_up_HEAD" href="005.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24"></a><a id="UDO_nav_lf_HEAD" href="00500f.html"><img src="udo_lf.gif" alt="Directory functions" title="Directory functions" border="0" width="24" height="24"></a><a id="UDO_nav_rg_HEAD" href="005011.html"><img src="udo_rg.gif" alt="ARGV procedure" title="ARGV procedure" border="0" width="24" height="24"></a>
<hr>

<h1><a name="Character_20input_2Foutput"></a>5.16 Character input/output</h1>
<table>
<tr><td nowrap="nowrap" valign="top">• <a href="#Cauxin">Cauxin</a>&nbsp;</td>
<td valign="top">Reads character from serial port.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cauxis">Cauxis</a>&nbsp;</td>
<td valign="top">Obtains input status of serial port.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cauxos">Cauxos</a>&nbsp;</td>
<td valign="top">Obtains output status of serial port.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cauxout">Cauxout</a></td>
<td valign="top">Writes character to serial port.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cconin">Cconin</a>&nbsp;</td>
<td valign="top">Reads character from standard input device.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cconis">Cconis</a>&nbsp;</td>
<td valign="top">Checks keyboard buffer whether character is waiting.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cconos">Cconos</a>&nbsp;</td>
<td valign="top">Checks status of standard output device.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cconout">Cconout</a></td>
<td valign="top">Writes character to standard output device.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cconrs">Cconrs</a>&nbsp;</td>
<td valign="top">Reads string from standard input device.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cconws">Cconws</a>&nbsp;</td>
<td valign="top">Outputs string to standard output device.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cnecin">Cnecin</a>&nbsp;</td>
<td valign="top">Reads character without displaying it on-screen.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cprnos">Cprnos</a>&nbsp;</td>
<td valign="top">Obtains printer status.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Cprnout">Cprnout</a></td>
<td valign="top">Outputs character to printer.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Crawcin">Crawcin</a></td>
<td valign="top">Reads character without display/interpretation.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Crawio">Crawio</a>&nbsp;</td>
<td valign="top">Reads character direct from keyboard, or outputs it to screen.

</td></tr>
</table>

<p><b>Note:</b> The output routines of the GEMDOS emulate a VT52
terminal.</p>

<h3><a name="Cauxin"></a>5.16.1 Cauxin</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character auxiliary input« - Input via serial port.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">3</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Cauxin ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cauxin reads a character byte from the
GEMDOS handle 2 - normally the serial port aux:. The function waits
until the character arrives.<br><br>

<b>Note:</b> Atari recommends use of the BIOS function <a href="About_the_BIOS.html#Bconin">Bconin</a>
for this, as Cauxin can cause problems when its handle is redirected
and end-of-file is encountered.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns the read-in character in the low byte of
the returned WORD.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cauxin">Binding</a> &nbsp; <a href="#Cauxout">Cauxout</a> &nbsp; <a href="About_the_BIOS.html#Bconin">Bconin</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cauxin"></a>5.16.1.1 Bindings for Cauxin</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Cauxin">Cauxin</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #3,-(sp)     ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #2,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cauxis"></a>5.16.2 Cauxis</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character auxiliary input status« - Check the input status
of the serial port.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">18</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int16_t Cauxis ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cauxis checks the status of GEMDOS handle
2 - normally the serial port aux: - to see whether at least one
character is waiting to be received.<br><br>

<b>Note:</b> The function works correctly with redirection of
input/output only as of GEMDOS Version 0.15. Atari recommends the use
of the BIOS function <a href="About_the_BIOS.html#Bconstat">Bconstat</a> instead.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function can return the following results:<table>
<tr><td nowrap="nowrap" valign="top">Value</td>
<td valign="top">Meaning</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">-1</td>
<td valign="top">At least one character in buffer available</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top">No character available

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cauxis">Binding</a> &nbsp; <a href="#Cauxos">Cauxos</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cauxis"></a>5.16.2.1 Bindings for Cauxis</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#Cauxis">Cauxis</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #18,-(sp)    ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #2,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cauxos"></a>5.16.3 Cauxos</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character auxiliary output status« - Check the ouput status
of the serial port.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">19</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int16_t Cauxos ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cauxos checks the status of GEMDOS handle
2 - normally the serial port aux: - to see whether it is ready to
output characters.<br><br>

<b>Note:</b> Atari recommends use of the BIOS function <a href="About_the_BIOS.html#Bcostat">Bcostat</a>
for this.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function can return the following results:<table>
<tr><td nowrap="nowrap" valign="top">Value</td>
<td valign="top">Meaning</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">-1</td>
<td valign="top">Character can be output</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top">Character can not be output

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cauxos">Binding</a> &nbsp; <a href="#Cauxis">Cauxis</a> &nbsp; <a href="About_the_BIOS.html#Bcostat">Bcostat</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cauxos"></a>5.16.3.1 Bindings for Cauxos</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#Cauxos">Cauxos</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #19,-(sp)    ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #2,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cauxout"></a>5.16.4 Cauxout</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character auxiliary output« - Write a character to the
serial port.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">4</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Cauxout ( int16_t c );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cauxout writes the character <i>c</i> to
GEMDOS handle 2 - normally the serial port aux:.<br><br>

<b>Note:</b> The function works correctly with redirection of
input/output only as of GEMDOS Version 0.15. Atari recommends the use
of the BIOS function <a href="About_the_BIOS.html#Bconout">Bconout</a> instead.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns a negative value in case of error.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cauxout">Binding</a> &nbsp; <a href="#Cauxin">Cauxin</a> &nbsp; <a href="About_the_BIOS.html#Bconout">Bconout</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cauxout"></a>5.16.4.1 Bindings for Cauxout</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Cauxout">Cauxout</a> ( int16_t c );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    c,-(sp)      ; Offset 2
move.w    #4,-(sp)     ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #4,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cconin"></a>5.16.5 Cconin</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character console input« - Read a character from the
standard input device.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">1</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Cconin ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cconin reads a character from GEMDOS
handle 0 - normally the standard input device con: (the keyboard as a
rule), waiting until one is available.<br><br>

<b>Note:</b> By setting bit 3 of the system variable
<i><a href="003004.html#conterm">conterm</a></i> one can have the value of <a href="About_the_BIOS.html#Kbshift">Kbshift</a> returned in bits
24..31. Unfortunately there is no way to recognise input/output
redirection or end-of-file. That is why many libraries define the key
combination Control-Z (ASCII-code 26) as the character for
end-of-file.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns a LONG with the ASCII-code of the
character in the lower WORD (bits 0 .. 7). If the read character
originates from the keyboard, then the lower 8 bits of the higher WORD
(bits 16 .. 23) contain the scancode of the keyboard, with Shift-key
status in the upper 8 bits as mentioned above. Note that if a
non-ASCII key is pressed, the ASCII-code returned will be 0.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cconin">Binding</a> &nbsp; <a href="#Cconout">Cconout</a> &nbsp; <a href="#Cconis">Cconis</a> &nbsp; <a href="About_the_BIOS.html#Kbshift">Kbshift</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cconin"></a>5.16.5.1 Bindings for Cconin</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Cconin">Cconin</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #1,-(sp)     ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #2,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cconis"></a>5.16.6 Cconis</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character console is waiting« - Check whether a character is
waiting in the standard input buffer.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">11</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Cconis ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cconis checks whether a character is
waiting to be read in GEMDOS handle 0 - normally the standard input
buffer of con:.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function can return the following results:<table>
<tr><td nowrap="nowrap" valign="top">Value</td>
<td valign="top">Meaning</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">-1L</td>
<td valign="top">Character available</td></tr>

<tr><td nowrap="nowrap" valign="top">0L</td>
<td valign="top">Character not available

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cconis">Binding</a> &nbsp; <a href="#Cconin">Cconin</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cconis"></a>5.16.6.1 Bindings for Cconis</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Cconis">Cconis</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #11,-(sp)    ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #2,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cconos"></a>5.16.7 Cconos</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character console output status« - Check status of standard
output device.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">16</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int16_t Cconos ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cconos checks whether a character may be
output to GEMDOS handle 1 - normally the standard output device con:.<br><br>

<b>Note:</b> The function works correctly with redirection of
input/output only as of GEMDOS Version 0.15.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns the status of the standard output device,
as follows:<table>
<tr><td nowrap="nowrap" valign="top">Value</td>
<td valign="top">Meaning</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top">Character can not be output</td></tr>

<tr><td nowrap="nowrap" valign="top">1</td>
<td valign="top">At least one character can be output

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cconos">Binding</a> &nbsp; <a href="#Cconout">Cconout</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cconos"></a>5.16.7.1 Bindings for Cconos</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#Cconos">Cconos</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #16,-(sp)    ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #2,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cconout"></a>5.16.8 Cconout</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character console output« - Write one character to the
standard output device.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">2</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Cconout ( int16_t c );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cconout writes the character <i>c</i> to
GEMDOS handle 1 - normally the standard output device con: - as a
rule the screen.<br><br>

<b>Note:</b> The character <i>c</i> contain the associated
ASCII-code in bits 0..7 (all other bits have to be 0). No line-feed
translation is done at the output, so ASCII 13 and ACII 10 must be
sent to start a new line. The function works correctly with
redirection of the input/output only as of GEMDOS Version 0.15; with
earlier versions, do not redirect this handle to a write-only device
since the call tries to read from the output stream to process the
'special' keys.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The return value of the function depends on the operating
system. The following apply:<table>
<tr><td nowrap="nowrap" valign="top">Operating system</td>
<td valign="top">Value</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="002.html">TOS</a></td>
<td valign="top">No sensible return value</td></tr>

<tr><td nowrap="nowrap" valign="top">MagiC < 3.00</td>
<td valign="top"><table>
<tr><td nowrap="nowrap" valign="top">< 0</td>
<td valign="top">= Error</td></tr>

<tr><td nowrap="nowrap" valign="top">0L</td>
<td valign="top">= Output device is full</td></tr>

<tr><td nowrap="nowrap" valign="top">1L</td>
<td valign="top">= Output was successful
</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">MiNT/MagiC > 3.00</td>
<td valign="top"><table>
<tr><td nowrap="nowrap" valign="top">< 0</td>
<td valign="top">= Error</td></tr>

<tr><td nowrap="nowrap" valign="top">0L</td>
<td valign="top">= Output device is full</td></tr>

<tr><td nowrap="nowrap" valign="top">1L</td>
<td valign="top">= Output was successful</td></tr>

<tr><td nowrap="nowrap" valign="top">4L</td>
<td valign="top">= Output to the terminal was successful
</td></tr>
</table>


</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cconout">Binding</a><a href="#Cconin">Cconin</a> &nbsp; <a href="#Cconos">Cconos</a> &nbsp; VT52 terminal

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cconout"></a>5.16.8.1 Bindings for Cconout</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Cconout">Cconout</a> ( int16_t c );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    c,-(sp)      ; Offset 2
move.w    #2,-(sp)     ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #4,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cconrs"></a>5.16.9 Cconrs</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character console read string« - Read a string from the
standard input.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">10</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Cconrs ( <a href="005014.html#LINE">LINE</a> *buf );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cconrs reads a string from the standard
input stream (GEMDOS handle 0) - normally the keyboard - and echoes
it to the standard output stream (GEMDOS handle 1) - normally the
screen.<br><br>

To do this one writes in the component <i>maxlen</i> of <a href="005014.html#LINE">LINE</a> the
number of bytes to be read in - 1. The input will be terminated by the
function when the Return key is pressed or the maximum input length
has been exceeded.<br><br>

'Special' key combinations cause various actions. In detail:<table>
<tr><td nowrap="nowrap" valign="top">Input</td>
<td valign="top">Meaning</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">Return</td>
<td valign="top">End of input; don't place Return in buffer</td></tr>

<tr><td nowrap="nowrap" valign="top">Control-J</td>
<td valign="top">End of line; don't place Ctrl-J in buffer</td></tr>

<tr><td nowrap="nowrap" valign="top">Control-H</td>
<td valign="top">Kill last character (= Delete)</td></tr>

<tr><td nowrap="nowrap" valign="top">Backspace</td>
<td valign="top">Delete last character</td></tr>

<tr><td nowrap="nowrap" valign="top">Control-U/X</td>
<td valign="top">Delete whole line and start over</td></tr>

<tr><td nowrap="nowrap" valign="top">Control-R</td>
<td valign="top">Echo input line and start over</td></tr>

<tr><td nowrap="nowrap" valign="top">Control-C</td>
<td valign="top">Terminate program (!)

</td></tr>
</table>

<br><br>

<b>Note:</b> Umlauts are handled correctly by the function only
as of GEMDOS Version 0.15. On earlier versions a possible end-of-file
will not be recognised, and read characters will be output to the
screen even if the standard output has been redirected.<br><br>

<b>In <a href="00b.html">MagiC</a> the function has been greatly extended; here the
following apply:</b><table>
<tr><td nowrap="nowrap" valign="top">Input</td>
<td valign="top">Meaning</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">Cursor up/down</td>
<td valign="top">Get back last input</td></tr>

<tr><td nowrap="nowrap" valign="top">Cursor left/right</td>
<td valign="top">Move cursor by one character L/R</td></tr>

<tr><td nowrap="nowrap" valign="top">ditto with Shift</td>
<td valign="top">Cursor to start/end of line</td></tr>

<tr><td nowrap="nowrap" valign="top">ClrHome</td>
<td valign="top">Cursor to start of line</td></tr>

<tr><td nowrap="nowrap" valign="top">Insert</td>
<td valign="top">Insert mode</td></tr>

<tr><td nowrap="nowrap" valign="top">Shift-Insert</td>
<td valign="top">Overwrite mode</td></tr>

<tr><td nowrap="nowrap" valign="top">Shift-Clear</td>
<td valign="top">Delete input</td></tr>

<tr><td nowrap="nowrap" valign="top">Tabulator</td>
<td valign="top">Alternate line-start/-end</td></tr>

<tr><td nowrap="nowrap" valign="top">Undo</td>
<td valign="top">Undo last input</td></tr>

<tr><td nowrap="nowrap" valign="top">Delete/Backspace</td>
<td valign="top">Delete char. under/before cursor</td></tr>

<tr><td nowrap="nowrap" valign="top">F1..F10</td>
<td valign="top">Call environmental variables F1..F10

</td></tr>
</table>

<br><br>

With normal files MagiC will read up to the first LF, while CR
is skipped. The environmental variables can be assigned with any
desired command interpreter (e.g. the <i>Mupfel</i>).</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top">The function returns the value 0L on successful conclusion, or
a negative number in case of error.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cconrs">Binding</a> &nbsp; <a href="#Cconws">Cconws</a> &nbsp; <a href="00b.html">MagiC</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cconrs"></a>5.16.9.1 Bindings for Cconrs</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Cconrs">Cconrs</a> ( <a href="005014.html#LINE">LINE</a> *buf );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>pea       buf          ; Offset 2
move.w    #10,-(sp)    ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #6,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cconws"></a>5.16.10 Cconws</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character console write string« - Write a string to the
standard output device.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">9</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Cconws ( CONST BYTE *buf );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cconws writes the string <i>buf</i> to
GEMDOS handle 1 - normally the standard output device con:. The
string must be NULL-terminated (with the ASCII character 0). With
GEMDOS versions below 0.15, do not redirect this handle to a
write-only device since the call tries to read from the output stream
to process the 'special' keys.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> Under TOS 1.04 the function returns the value 0L on
successful execution, or the value -1L in case of error. Under other
operating systems the function is evidently declared as void, since
there it provides no usable return values at all.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cconws">Binding</a> &nbsp; <a href="#Cconrs">Cconrs</a> &nbsp; <a href="VT_52_terminal.html">VT-52 terminal</a> &nbsp; <a href="010001.html">ASCII table</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cconws"></a>5.16.10.1 Bindings for Cconws</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Cconws">Cconws</a> ( CONST BYTE *buf );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>pea       buf          ; Offset 2
move.w    #9,-(sp)     ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #6,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cnecin"></a>5.16.11 Cnecin</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character no echo input« - Read character from the standard
input device without displaying it on-screen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">8</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Cnecin ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cnecin reads a character from GEMDOS
handle 0 - normally the standard input device con: (the keyboard as a
rule), without outputting it to the standard output device (normally
the screen).<br><br>

<b>Note:</b> Flow control can be achieved with the key
combinations Control-S (stop output) or Control-Q (continue output).
With GEMDOS versions prior to 0.30, if the function's handle is
redirected an end-of-file condition will cause the system to hang.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns a LONG with the ASCII-code of the
character in the lower WORD (bits 0 .. 7). If the read character
originates from the keyboard, then the lower 8 bits of the higher WORD
(bits 16 .. 23) will contain the scancode of the keyboard, with
Shift-key status in the upper 8 bits provided bit 3 of the system
variable <i><a href="003004.html#conterm">conterm</a></i> is set. Note that if a non-ASCII key is
pressed, the ASCII-code returned will be 0.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cnecin">Binding</a> &nbsp; <a href="#Cconin">Cconin</a> &nbsp; <a href="#Crawcin">Crawcin</a> &nbsp; <a href="#Crawio">Crawio</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cnecin"></a>5.16.11.1 Bindings for Cnecin</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Cnecin">Cnecin</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #8,-(sp)     ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #2,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cprnos"></a>5.16.12 Cprnos</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character printer output status« - Check the status of the
printer port.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">17</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int16_t Cprnos ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cprnos checks whether handle 3 - normally
the parallel port prn: - is ready to accept characters.<br><br>

<b>Note:</b> It is strongly recommended to use this function
before starting a printout, since it takes around 30 seconds to
recognize a printer timeout if the printer is not ready (perhaps not
switched on?).</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function can return the following results:<table>
<tr><td nowrap="nowrap" valign="top">Value</td>
<td valign="top">Meaning</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">-1</td>
<td valign="top">Printer is ready</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top">Printer is not ready

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cprnos">Binding</a> &nbsp; <a href="#Cconos">Cconos</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cprnos"></a>5.16.12.1 Bindings for Cprnos</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#Cprnos">Cprnos</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #17,-(sp)    ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #2,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Cprnout"></a>5.16.13 Cprnout</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character printer output« - Write a character to the printer
port.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">5</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Cprnout ( int16_t c );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Cprnout writes the character <i>c</i> to
GEMDOS handle 3 - normally the printer port prn:.<br><br>

<i>c</i> is a WORD value, with the character to be output
occupying bits 0..7; all other bits must be 0.<br><br>

<b>Note:</b> Before print output one should check with <a href="#Cprnos">Cprnos</a>
whether the printer is ready. Settings made with the aid of the <a href="00400a.html#Setprt">Setprt</a>
function are <i>ignored</i> for printing by almost all TOS
versions. With redirection of input/output, the function works
correctly only as of GEMDOS Version 0.15.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns 0 in case of error, else non-zero if it
wrote the character to the printer successfully.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Cprnout">Binding</a> &nbsp; <a href="#Cprnos">Cprnos</a> &nbsp; <a href="00400a.html#Setprt">Setprt</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Cprnout"></a>5.16.13.1 Bindings for Cprnout</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Cprnout">Cprnout</a> ( int16_t c );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    c,-(sp)      ; Offset 2
move.w    #5,-(sp)     ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #4,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Crawcin"></a>5.16.14 Crawcin</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character raw input« - Read a character unbuffered from
standard input device.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">7</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Crawcin ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Crawcin reads a character from GEMDOS
handle 1 - normally the standard input con: (the keyboard) - without
echoing it immediately to the screen or processing any of the
'special' keys.<br><br>

<b>Note:</b> The function works correctly with input/output
redirection only as of GEMDOS Version 0.15.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns a LONG with the ASCII-code of the
character in the lower WORD (bits 0 .. 7). If the read character
originates from the keyboard, then the lower 8 bits of the higher WORD
(bits 16 .. 23) will contain the scancode of the keyboard, with
Shift-key status in the upper 8 bits provided bit 3 of the system
variable <i><a href="003004.html#conterm">conterm</a></i> is set. Note that if a non-ASCII key is
pressed, the ASCII-code returned will be 0.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Crawcin">Binding</a> &nbsp; <a href="#Cconin">Cconin</a> &nbsp; <a href="#Cconout">Cconout</a> &nbsp; <a href="#Crawio">Crawio</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Crawcin"></a>5.16.14.1 Bindings for Crawcin</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Crawcin">Crawcin</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #7,-(sp)     ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #2,sp        ; Correct stack
</pre>


</td></tr>
</table>

<h3><a name="Crawio"></a>5.16.15 Crawio</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Character raw input output« - Permit unbuffered
input/output.</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top">6</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top">int32_t Crawio ( int16_t w );</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">The GEMDOS routine Crawio combines unbuffered console input
and output in one function. The following applies for the parameter
<i>w</i>, of which only the lower 8 bits are significant (others
should be 0):<table>
<tr><td nowrap="nowrap" valign="top">Value</td>
<td valign="top">Meaning</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">0xff</td>
<td valign="top">Read character from standard input</td></tr>

<tr><td nowrap="nowrap" valign="top">else</td>
<td valign="top">Output character to standard output

</td></tr>
</table>

<br><br>

<b>Note:</b> The function works correctly with input/output
redirection only as of GEMDOS Version 0.15.</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> If the parameter <i>w</i> has the value 0xff, the function
returns a bit-array LONG with the ASCII-code of the character in the
lower WORD (bits 0 .. 7). If the read character originates from the
keyboard, then the lower 8 bits of the higher WORD (bits 16 .. 23)
will contain the scancode of the keyboard, with Shift-key status in
the upper 8 bits provided bit 3 of the system variable <i><a href="003004.html#conterm">conterm</a></i>
is set. Note that if a non-ASCII key is pressed, the ASCII-code
returned will be 0. A return value of 0 means that no character is
available.</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">All GEMDOS versions.</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"><a href="#Character_20input_2Foutput">Character input/output</a></td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"><a href="#Bindings_20for_20Crawio">Binding</a> &nbsp; <a href="#Cconin">Cconin</a> &nbsp; <a href="#Cconout">Cconout</a> &nbsp; <a href="VT_52_terminal.html">VT-52 terminal</a>

</td></tr>
</table>

<h4><a name="Bindings_20for_20Crawio"></a>5.16.15.1 Bindings for Crawio</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Crawio">Crawio</a> ( int16_t w );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    w,-(sp)      ; Offset 2
move.w    #6,-(sp)     ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a>
addq.l    #4,sp        ; Correct stack
</pre>


</td></tr>
</table>

<hr>

<a id="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a><a id="UDO_nav_up_FOOT" href="005.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24"></a><a id="UDO_nav_lf_FOOT" href="00500f.html"><img src="udo_lf.gif" alt="Directory functions" title="Directory functions" border="0" width="24" height="24"></a><a id="UDO_nav_rg_FOOT" href="005011.html"><img src="udo_rg.gif" alt="ARGV procedure" title="ARGV procedure" border="0" width="24" height="24"></a></body>
</html>
