<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html lang="de">
<head>
<title>
Die Anleitung zum TOS: Druckerfunktionen
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO 7.04 (1296) for Linux">
</head>
<body>
<? include "/var/www/banner.php"; ?>

<a id="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a><a id="UDO_nav_up_HEAD" href="004.html"><img src="udo_up.gif" alt="XBIOS" title="XBIOS" border="0" width="24" height="24"></a><a id="UDO_nav_lf_HEAD" href="004009.html"><img src="udo_lf.gif" alt="Datum, Uhrzeit und Zeitgeber" title="Datum, Uhrzeit und Zeitgeber" border="0" width="24" height="24"></a><a id="UDO_nav_rg_HEAD" href="00400b.html"><img src="udo_rg.gif" alt="DSP-Programmierung" title="DSP-Programmierung" border="0" width="24" height="24"></a>
<hr>

<h1><a name="Druckerfunktionen"></a>4.10 Druckerfunktionen</h1>
<table>
<tr><td nowrap="nowrap" valign="top">• <a href="#Prtblk">Prtblk</a></td>
<td valign="top">Hardcopy-Funktion mit Parameterblock.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Scrdmp">Scrdmp</a></td>
<td valign="top">Bildschirminhalt ausdrucken.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Setprt">Setprt</a></td>
<td valign="top">Druckereinstellung ermitteln oder ändern.

</td></tr>
</table>

<p>Querverweis: <a href="Screen_functions.html">Bildschirmfunktionen</a> &nbsp; <a href="VDI_fundamentals.html#GDOS-Treiber">GDOS-Treiber</a></p>

<h3><a name="Prtblk"></a>4.10.1 Prtblk</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»print screen dump« - Hardcopy-Ausdruck.</td></tr>

<tr><td nowrap="nowrap" valign="top">Xbiosnummer:</td>
<td valign="top">36</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">void Prtblk( <a href="004015.html#PBDEF">PBDEF</a> *par );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die <a href="004.html">XBIOS</a>-Routine Prtblk druckt einen bestimmten Bereich im
Speicher aus. Der Zeiger <i>par</i> dient der Beschreibung der
Struktur des Bildschirmaufbaus.<br><br>

Der Druckvorgang kann durch die Tastenkombination Alternate/Help
abgebrochen werden.<br><br>

<b>Hinweis:</b> Vor dem Aufruf dieser Funktion sollte die
Systemvariable <a href="003004.html#prt_cnt">prt_cnt</a> auf 1 gesetzt werden, damit überhaupt etwas
passiert. Nach Rückkehr der Funktion sollte die Variable auf -1
zurückgesetzt werden.<br><br>

<b>Achtung:</b> Ab MagiC 3 ist diese Funktion nur noch als
Dummy-Routine vorhanden; ggfs. ist durch ein externes Programm die
gewünschte Funktionalität wieder herzustellen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Die Funktion liefert als Ergebnis eine 0, wenn der Ausdruck
erfolgreich war, ansonsten einen von 0 verschiedenen Wert.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Alle TOS Versionen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Druckerfunktionen">Druckerfunktionen</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20Prtblk">Binding</a> &nbsp; <a href="00b013.html#HARDCOPY">HARDCOPY</a> &nbsp; <a href="00b.html">MagiC</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Prtblk"></a>4.10.1.1 Bindings für Prtblk</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">#include <tos.h><br><br>

void <a href="#Prtblk">Prtblk</a>( <a href="004015.html#PBDEF">PBDEF</a> *par );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>pea       par          ; Offset 2
move.w    #36,-(sp)    ; Offset 0
trap      #14          ; <a href="004.html">XBIOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>


</td></tr>
</table>

<h3><a name="Scrdmp"></a>4.10.2 Scrdmp</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»screen dump« - druckt den Bildschirminhalt aus.</td></tr>

<tr><td nowrap="nowrap" valign="top">Xbiosnummer:</td>
<td valign="top">20</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">void Scrdmp( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die XBIOS-Routine Scrdmp druckt den Inhalt des Bildschirms
als Hardcopy aus.<br><br>

Der Druckvorgang kann durch die Tastenkombination Alternate/Help
abgebrochen werden.<br><br>

<b>Hinweis:</b> Die Funktion springt über den Systemvektor
<a href="003004.html#scr_dump">scr_dump</a>, und funktioniert leider nicht auf allen verfügbaren
Druckern.<br><br>

<b>Achtung:</b> Ab MagiC 3 ist diese Funktion nur noch als
Dummy-Routine vorhanden; ggfs. ist durch ein externes Programm die
gewünschte Funktionalität wieder herzustellen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Die Funktion liefert kein Ergebnis.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Alle TOS Versionen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Druckerfunktionen">Druckerfunktionen</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20Scrdmp">Binding</a> &nbsp; <a href="00b013.html#HARDCOPY">HARDCOPY</a> &nbsp; <a href="00b.html">MagiC</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Scrdmp"></a>4.10.2.1 Bindings für Scrdmp</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">#include <tos.h><br><br>

void <a href="#Scrdmp">Scrdmp</a>( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #20,-(sp)    ; Offset 0
trap      #14          ; <a href="004.html">XBIOS</a> aufrufen
addq.l    #2,sp        ; Stack korrigieren
</pre>


</td></tr>
</table>

<h3><a name="Setprt"></a>4.10.3 Setprt</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Setprinter« - initialisiert den Drucker.</td></tr>

<tr><td nowrap="nowrap" valign="top">Xbiosnummer:</td>
<td valign="top">33</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int16_t Setprt( int16_t config );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die XBIOS-Routine Setprt setzt bzw. liest die aktuelle
Einstellung des Druckers. Folgende Bits können im Parameter
<i>config</i> angegeben werden:<br><br>


<div align="left">
<table border="0">
<tr>
  <td align="center" valign="top">Bit</td>
  <td align="left" valign="top">Bedeutung</td>
</tr>
<tr>
  <td align="center" valign="top">0</td>
  <td align="left" valign="top">Matrix- oder Typenraddrucker</td>
</tr>
<tr>
  <td align="center" valign="top">1</td>
  <td align="left" valign="top">monochrom oder farbig</td>
</tr>
<tr>
  <td align="center" valign="top">2</td>
  <td align="left" valign="top">Epson-, oder Atari-Drucker</td>
</tr>
<tr>
  <td align="center" valign="top">3</td>
  <td align="left" valign="top">Schönschrift oder Konzeptschrift</td>
</tr>
<tr>
  <td align="center" valign="top">4</td>
  <td align="left" valign="top">Centronics oder RS232</td>
</tr>
<tr>
  <td align="center" valign="top">5</td>
  <td align="left" valign="top">Endlospapier oder Einzelblatt</td>
</tr>
</table>
</div>

<br><br>

Bei <i>config</i> = -1 wird die aktuelle Konfiguration
zurückgegeben. Alle weiteren Bits sind für zukünftige Zwecke
reserviert.<br><br>

<b>Hinweis:</b> Die durch diese Funktion gemachten Einstellungen
werden leider von fast allen Betriebssystemteilen ignoriert. In
eigenen Programmen sollte zumindest die Wahl der Schnittstelle sowie
der Papierart ausgewertet werden.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Die Funktion liefert als Ergebnis die alte Konfiguration.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Alle TOS Versionen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Druckerfunktionen">Druckerfunktionen</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20Setprt">Binding</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Setprt"></a>4.10.3.1 Bindings für Setprt</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">#include <tos.h><br><br>

int16_t <a href="#Setprt">Setprt</a>( int16_t config );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    config,-(sp)  ; Offset 2
move.w    #33,-(sp)     ; Offset 0
trap      #14           ; <a href="004.html">XBIOS</a> aufrufen
addq.l    #4,sp         ; Stack korrigieren
</pre>


</td></tr>
</table>

<hr>

<a id="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a><a id="UDO_nav_up_FOOT" href="004.html"><img src="udo_up.gif" alt="XBIOS" title="XBIOS" border="0" width="24" height="24"></a><a id="UDO_nav_lf_FOOT" href="004009.html"><img src="udo_lf.gif" alt="Datum, Uhrzeit und Zeitgeber" title="Datum, Uhrzeit und Zeitgeber" border="0" width="24" height="24"></a><a id="UDO_nav_rg_FOOT" href="00400b.html"><img src="udo_rg.gif" alt="DSP-Programmierung" title="DSP-Programmierung" border="0" width="24" height="24"></a></body>
</html>
