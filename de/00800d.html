<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html lang="de">
<head>
<title>
Die Anleitung zum TOS: Klemmbrett-Funktionen
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO 7.04 (1296) for Linux">
</head>
<body>
<? include "/var/www/banner.php"; ?>

<a id="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a><a id="UDO_nav_up_HEAD" href="008.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24"></a><a id="UDO_nav_lf_HEAD" href="00800c.html"><img src="udo_lf.gif" alt="Grafikfunktionen" title="Grafikfunktionen" border="0" width="24" height="24"></a><a id="UDO_nav_rg_HEAD" href="00800e.html"><img src="udo_rg.gif" alt="Listboxen" title="Listboxen" border="0" width="24" height="24"></a>
<hr>

<h1><a name="Klemmbrett-Funktionen"></a>8.13 Klemmbrett-Funktionen</h1>
<p>Diese Bibliothek stellt Funktionen zur Verfügung, die einen
standardisierten Datenaustausch zwischen verschiedenen Programmen
ermöglichen. Für diesen Zweck sind die folgenden Routinen vorhanden:</p>

<table>
<tr><td nowrap="nowrap" valign="top">• <a href="#scrp_clear">scrp_clear</a></td>
<td valign="top">Dateien im Klemmbrett löschen.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#scrp_read">scrp_read</a></td>
<td valign="top">Pfad des Klemmbrettes ermitteln.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#scrp_write">scrp_write</a></td>
<td valign="top">Pfad des Klemmbrettes setzen.

</td></tr>
</table>

<p><b>Hinweis:</b> Neben diesen Funktionen sind beim Datenaustausch
über das Klemmbrett noch weitere Einzelheiten zu beachten.</p>

<p>Querverweis: <a href="008007.html#Nachrichten">Nachrichten</a> &nbsp; <a href="008007.html#SC_CHANGED">SC_CHANGED</a> &nbsp; <a href="008007.html#SH_WDRAW">SH_WDRAW</a> &nbsp;
<a href="00a002.html">Style-Guidelines</a></p>

<h3><a name="scrp_clear"></a>8.13.1 scrp_clear</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Scrap clear« - Inhalt des Clipboards löschen</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="008.html">AES</a>-Nummer:</td>
<td valign="top">82</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int16_t scrp_clear ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung_</td>
<td valign="top">Die Funktion löscht alle Dateien im aktuellen Klemmbrett.<br><br>

<b>Achtung:</b> Entgegen den üblichen Konventionen werden
wirklich <i>alle</i> Dateien, und nicht nur solche auf die die Maske
"scrap.*" paßt, gelöscht.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Ein Fehler ist nur dann aufgetreten, wenn als Ergebnis 0
zurückgegeben wird.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Die Funktion steht nur unter PC-<a href="002002.html">GEM</a>, KAOS 1.4.2 und <a href="00b.html">MagiC</a>
(jeweils) zur Verfügung, Nicht vorhanden in ViewMAX.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Klemmbrett-Funktionen">Zwischenspeicher</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="scrp_clear.html#Bindings_20f_C3_BCr_20scrp_clear">Binding</a> &nbsp; <a href="008002.html#Der_20Datenaustausch_20_C3_BCber_20das_20GEM-Klemmbrett">Datenaustausch per Klemmbrett</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20scrp_clear"></a>8.13.1.1 Bindings für scrp_clear</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#scrp_clear">scrp_clear</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top"><pre>int16_t <a href="#scrp_clear">scrp_clear</a> (void)
{
   return ( <a href="008002.html#crys_if">crys_if</a>(82) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="002002.html">GEM</a>-Arrays:</td>
<td valign="top"><br><br>


<div align="left">
<table border="0">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a></td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[0]</td>
  <td align="left" valign="top">82    # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+2</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[1]</td>
  <td align="left" valign="top">0     # Einträge in <a href="008002.html#int_in">int_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+4</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[2]</td>
  <td align="left" valign="top">1     # Einträge in <a href="008002.html#int_out">int_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+6</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[3]</td>
  <td align="left" valign="top">0     # Einträge in <a href="008002.html#addr_in">addr_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+8</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[4]</td>
  <td align="left" valign="top">0     # Einträge in <a href="008002.html#addr_out">addr_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a></td>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a>[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
</table>
</div>



</td></tr>
</table>

<h3><a name="scrp_read"></a>8.13.2 scrp_read</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Scrap read« - ermittelt den Pfadnamen des Klemmbrettes.</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="008.html">AES</a>-Nummer:</td>
<td valign="top">80</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int16_t scrp_read ( int8_t *sc_rpscrap );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die Funktion ermittelt das aktuelle Verzeichnis, welches für
die Zwischenablage (Klemmbrett) benutzt wird.<br><br>

<b>Hinweis:</b> Das Klemmbrett-Verzeichnis befindet sich nach dem
Aufruf der Funktion im Parameter <i>sc_rpscrap</i>. Man sollte auf
eine ausreichende Größe dieses aufnehmenden Puffers achten.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Ein Fehler ist nur dann aufgetreten, wenn als Ergebnis 0
zurückgegeben wird.<br><br>

Zitat Mike Fulton, Atari Computer:
<br>»The scrp_read() function is defined as possibly returning an
error code of zero. However, this function currently always returns a
value of 1. Since this may change in future versions of GEM
AES, applications should handle the case of the error code even if
the programmer does not expect to see it.«<br><br>

Ab PC-GEM Version 2.0 werden jedoch die folgenden Werte
zurückgeliefert: -1, falls noch kein Pfad gesetzt ist, Rückgabewerte
>= 0 sind als Bitvektor aufzufassen, der über gefundene Dateitypen
informieren soll. Es gilt die folgende Belegung:<a name="SCRAP_CSV"></a>
<a name="SCRAP_TXT"></a>
<a name="SCRAP_GEM"></a>
<a name="SCRAP_IMG"></a>
<a name="SCRAP_DCA"></a>
<a name="SCRAP_USR"></a>
<br><br>


<div align="left">
<table border="0">
<tr>
  <td align="left" valign="top">SCRAP_CSV</td>
  <td align="left" valign="top">0x0001</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.csv</td>
</tr>
<tr>
  <td align="left" valign="top">SCRAP_TXT</td>
  <td align="left" valign="top">0x0002</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.txt</td>
</tr>
<tr>
  <td align="left" valign="top">SCRAP_GEM</td>
  <td align="left" valign="top">0x0004</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.gem</td>
</tr>
<tr>
  <td align="left" valign="top">SCRAP_IMG</td>
  <td align="left" valign="top">0x0008</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.img</td>
</tr>
<tr>
  <td align="left" valign="top">SCRAP_DCA</td>
  <td align="left" valign="top">0x0010</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.dca</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">0x0020</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.dif (siehe Hinweis)</td>
</tr>
<tr>
  <td align="left" valign="top">SCRAP_USR</td>
  <td align="left" valign="top">0x8000</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">scrap.usr</td>
</tr>
</table>
</div>

<br><br>

Alle anderen Bits sind für zukünftige Zwecke reserviert.<br><br>

<b>Hinweis:</b> Laut der Doku zu PC-GEM ist scrap.usr in Bit
5 kodiert. Der AES-Quelltext sagt aber Bit 15. Die Library aus dem
Buch "Vom Anfänger zum GEM-Profi" belegt Bit 5 mit DIF-Dateien.
Die Erweiterung ist inoffiziell und funktioniert nur wenn diese
Library für die Erstellung benutzt wird.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">All AES versions, not present in ViewMAX.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Klemmbrett-Funktionen">Zwischenspeicher</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20scrp_read">Binding</a> &nbsp; <a href="#scrp_write">scrp_write</a> &nbsp; <a href="008002.html#Der_20Datenaustausch_20_C3_BCber_20das_20GEM-Klemmbrett">Datenaustausch per Klemmbrett</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20scrp_read"></a>8.13.2.1 Bindings für scrp_read</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#scrp_read">scrp_read</a> ( int8_t *sc_rpscrap );</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top"><pre>int16_t <a href="#scrp_read">scrp_read</a> (int8_t *sc_rpscrap)
{
   <a href="008002.html#addr_in">addr_in</a>[0] = sc_rpscrap;
   return ( <a href="008002.html#crys_if">crys_if</a>(80) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="002002.html">GEM</a>-Arrays:</td>
<td valign="top"><br><br>


<div align="left">
<table border="0">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a></td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[0]</td>
  <td align="left" valign="top">80    # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+2</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[1]</td>
  <td align="left" valign="top">0     # Einträge in <a href="008002.html#int_in">int_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+4</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[2]</td>
  <td align="left" valign="top">1     # Einträge in <a href="008002.html#int_out">int_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+6</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[3]</td>
  <td align="left" valign="top">1     # Einträge in <a href="008002.html#addr_in">addr_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+8</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[4]</td>
  <td align="left" valign="top">0     # Einträge in <a href="008002.html#addr_out">addr_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#addr_in">addr_in</a></td>
  <td align="left" valign="top"><a href="008002.html#addr_in">addr_in</a>[0]</td>
  <td align="left" valign="top">sc_rpscrap</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a></td>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a>[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
</table>
</div>



</td></tr>
</table>

<h3><a name="scrp_write"></a>8.13.3 scrp_write</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Scrap write« - setzt den Pfad für das Klemmbrett.</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="008.html">AES</a>-Nummer:</td>
<td valign="top">81</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int16_t scrp_write ( int8_t *sc_wpscrap );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die Funktion setzt das Verzeichnis, welches für die
Zwischenablage (Klemmbrett) benutzt werden soll.<br><br>

<b>Hinweis:</b> Der Name des neuen Pfades wird im Parameter
<i>sc_wpscrap</i> übergeben. Das Klemmbrett sollte den Namen CLIPBRD
tragen, und sich auf dem jeweiligen Bootlaufwerk befinden.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Ein Fehler ist nur dann aufgetreten, wenn als Ergebnis 0
zurückgegeben wird.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">All AES versions, not present in ViewMAX.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Klemmbrett-Funktionen">Zwischenspeicher</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20scrp_write">Binding</a> &nbsp; <a href="#scrp_read">scrp_read</a> &nbsp; <a href="008002.html#Der_20Datenaustausch_20_C3_BCber_20das_20GEM-Klemmbrett">Datenaustausch per Klemmbrett</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20scrp_write"></a>8.13.3.1 Bindings für scrp_write</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#scrp_write">scrp_write</a> ( int8_t *sc_wpscrap );</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top"><pre>int16_t <a href="#scrp_write">scrp_write</a> (int8_t *sc_wpscrap)
{
   <a href="008002.html#addr_in">addr_in</a>[0] = sc_wpscrap;
   return ( <a href="008002.html#crys_if">crys_if</a>(81) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="002002.html">GEM</a>-Arrays:</td>
<td valign="top"><br><br>


<div align="left">
<table border="0">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a></td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[0]</td>
  <td align="left" valign="top">81    # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+2</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[1]</td>
  <td align="left" valign="top">0     # Einträge in <a href="008002.html#int_in">int_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+4</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[2]</td>
  <td align="left" valign="top">1     # Einträge in <a href="008002.html#int_out">int_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+6</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[3]</td>
  <td align="left" valign="top">1     # Einträge in <a href="008002.html#addr_in">addr_in</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#control">control</a>+8</td>
  <td align="left" valign="top"><a href="008002.html#control">control</a>[4]</td>
  <td align="left" valign="top">0     # Einträge in <a href="008002.html#addr_out">addr_out</a></td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#addr_in">addr_in</a></td>
  <td align="left" valign="top"><a href="008002.html#addr_in">addr_in</a>[0]</td>
  <td align="left" valign="top">sc_wpscrap</td>
</tr>
<tr>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a></td>
  <td align="left" valign="top"><a href="008002.html#int_out">int_out</a>[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
</table>
</div>



</td></tr>
</table>

<hr>

<a id="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a><a id="UDO_nav_up_FOOT" href="008.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24"></a><a id="UDO_nav_lf_FOOT" href="00800c.html"><img src="udo_lf.gif" alt="Grafikfunktionen" title="Grafikfunktionen" border="0" width="24" height="24"></a><a id="UDO_nav_rg_FOOT" href="00800e.html"><img src="udo_rg.gif" alt="Listboxen" title="Listboxen" border="0" width="24" height="24"></a></body>
</html>
