<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html lang="de">
<head>
<title>
Die Anleitung zum TOS: Datum und Uhrzeit
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO 7.04 (1296) for Linux">
</head>
<body>
<? include "/var/www/banner.php"; ?>

<a id="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a><a id="UDO_nav_up_HEAD" href="005.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24"></a><a id="UDO_nav_lf_HEAD" href="005009.html"><img src="udo_lf.gif" alt="Dateifunktionen" title="Dateifunktionen" border="0" width="24" height="24"></a><a id="UDO_nav_rg_HEAD" href="00500b.html"><img src="udo_rg.gif" alt="Prozessfunktionen" title="Prozessfunktionen" border="0" width="24" height="24"></a>
<hr>

<h1><a name="Datum_20und_20Uhrzeit"></a>5.10 Datum und Uhrzeit</h1>
<table>
<tr><td nowrap="nowrap" valign="top">• <a href="#Talarm">Talarm</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top">Weckfunktion.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Tgetdate">Tgetdate</a>&nbsp;&nbsp;</td>
<td valign="top">Datum ermitteln.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Tgettime">Tgettime</a>&nbsp;&nbsp;</td>
<td valign="top">Uhrzeit ermitteln.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Tgettimeofday">Tgettimeofday</a></td>
<td valign="top">interrogates the state of the internal, high resolution system
clock.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Tmalarm">Tmalarm</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top">reads/sets a process alarm for the current process.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Tsetdate">Tsetdate</a>&nbsp;&nbsp;</td>
<td valign="top">Datum einstellen.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Tsetitimer">Tsetitimer</a></td>
<td valign="top">Steuerung eines periodischen Timers.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Tsettime">Tsettime</a>&nbsp;&nbsp;</td>
<td valign="top">Uhrzeit einstellen.</td></tr>

<tr><td nowrap="nowrap" valign="top">• <a href="#Tsettimeofday">Tsettimeofday</a></td>
<td valign="top">sets the state of the internal, high resolution system clock.

</td></tr>
</table>

<p>Querverweis: <a href="004009.html">Datum und Zeit im XBIOS</a></p>

<h3><a name="Talarm"></a>5.10.1 Talarm</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Talarm« - Lesen/setzen eines Alarms für den aktuellen
Prozess.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top">288 (0x0120)</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int32_t Talarm ( int32_t time );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die Funktion sendet dem aufrufenden Prozess nach <i>time</i>
Sekunden ein <a href="005007.html#SIGALRM">SIGALRM</a>-Signal.<br><br>

Falls für dieses Signal kein Signal-Handler per <a href="00500b.html#Psignal">Psignal</a>
installiert wurde, wird der Prozess sofort (d.h. beim Eintreffen des
Signals) terminiert.<br><br>

Durch einen Wert von <i>time</i> = 0, kann ein früher gesetzter
Alarm storniert werden. Ist <i>time</i> negativ, so hat die Funktion
keine Auswirkungen und lediglich der Rückgabewert wird geliefert.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Die Funktion liefert die Zeit bis zum Eintreffen des
SIGALRM-Signals (wenn ein Alarm aktiviert wurde) in Sekunden zurück,
und anderenfalls den Wert 0.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Seit der ersten in MultiTOS integrierten MiNT Version 1.04.<br><br>

Diese Funktion wurde mit MiNT Version 0.8pl8 eingeführt, aber
für Versionen vor 1.12 enthält der Code einen Fehler, der die
Funktionalität beeinträchtigt.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20Talarm">Binding</a> &nbsp; <a href="#Tmalarm">Tmalarm</a> &nbsp; <a href="00500b.html#Pause">Pause</a> &nbsp; <a href="00500b.html#Psignal">Psignal</a> &nbsp; <a href="005007.html">Signale</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Talarm"></a>5.10.1.1 Bindings für Talarm</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Talarm">Talarm</a> ( int32_t time );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.l    time,-(sp)   ; Offset 2
move.w    #288,-(sp)   ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>


</td></tr>
</table>

<h3><a name="Tgetdate"></a>5.10.2 Tgetdate</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»get date« - Tagesdatum ermitteln.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top">42</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">uint32_t Tgetdate ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die <a href="005.html">GEMDOS</a>-Routine Tgetdate ermittelt das aktuelle Tagesdatum.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Die Funktion liefert als Ergebnis eine uint32_t-Zahl mit dem
Tagesdatum. Das Datum ist wie folgt codiert:<table>
<tr><td nowrap="nowrap" valign="top">Bits</td>
<td valign="top">Bedeutung</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">0-4</td>
<td valign="top">Tag (1-31)</td></tr>

<tr><td nowrap="nowrap" valign="top">5-8</td>
<td valign="top">Monat (1-12)</td></tr>

<tr><td nowrap="nowrap" valign="top">9-15</td>
<td valign="top">Jahr (0-119, 0= 1980)

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Alle <a href="005.html">GEMDOS</a> Versionen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20Tgetdate">Binding</a> &nbsp; <a href="#Tsetdate">Tsetdate</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tgetdate"></a>5.10.2.1 Bindings für Tgetdate</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">uint32_t <a href="#Tgetdate">Tgetdate</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #42,-(sp)    ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a> aufrufen
addq.l    #2,sp        ; Stack korrigieren
</pre>


</td></tr>
</table>

<h3><a name="Tgettime"></a>5.10.3 Tgettime</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»get time« - ermittelt die Uhrzeit.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top">44</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">uint32_t Tgettime ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die <a href="005.html">GEMDOS</a>-Routine Tgettime ermittelt die Uhrzeit.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Die Funktion liefert als Ergebnis die Uhrzeit. Sie ist wie
folgt codiert:<table>
<tr><td nowrap="nowrap" valign="top">Bits</td>
<td valign="top">Bedeutung</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">0-4</td>
<td valign="top">Sekunden im Zweierschritt (0-29)</td></tr>

<tr><td nowrap="nowrap" valign="top">5-10</td>
<td valign="top">Minuten (0-59)</td></tr>

<tr><td nowrap="nowrap" valign="top">11-15</td>
<td valign="top">Stunden (0-23)

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Alle GEMDOS Versionen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20Tgettime">Binding</a> &nbsp; <a href="#Tsettime">Tsettime</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tgettime"></a>5.10.3.1 Bindings für Tgettime</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">uint32_t <a href="#Tgettime">Tgettime</a> ( void );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    #44,-(sp)    ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a> aufrufen
addq.l    #2,sp        ; Stack korrigieren
</pre>


</td></tr>
</table>

<h3><a name="Tgettimeofday"></a>5.10.4 Tgettimeofday</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Tgettimeofday« - erfragt den Status der internen,
hochauflösenden Systemzeit.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top">341 (0x0155)</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int32_t Tgettimeofday ( <a href="005014.html#timeval">timeval</a> *tv, <a href="005014.html#timezone">timezone</a> *tzp );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Diese Funktion erfragt den Status der internen,
hochauflösenden Systemzeit.<br><br>

Das Argument <i>tv</i> ist ein Zeiger auf eine <a href="005014.html#timeval">timeval</a> Struktur.<br><br>

Das Argument <i>tzp</i> ist ein Zeiger auf eine <a href="005014.html#timezone">timezone</a>
Struktur.<br><br>

Es kann für jeden der beiden Argumente NULL übergeben werden.
Dies wird nicht als Fehler angesehen.<br><br>

Entwickler von Bibliotheken sollten beachten, daß die Definition
der Struktur timezone nicht konform zu der anderer Strukturen ist. Die
Member sind vom Datentyp int und nicht long (Dies trifft nur für die
Struktur timezone zu, die Member der Struktur timeval sind vom Datentyp
long). 16-Bit Bibliotheken müssen den Inhalt der Struktur, auf die
tzp zeigt, kopieren.<br><br>

Der <a href="00500e.html#Ssystem">Ssystem</a>() Aufruf hat ein Kommando <a href="00500e.html#S_CLOCKMODE">S_CLOCKMODE</a>. Dieses Kommando
erlaubt es, den Modus des Kernel Zeitgebers zu setzen oder anzufragen.
Z.B. festzulegen, ob die Hardware Uhr UTC oder die local time anzeigt.
<br>Es ist geplant, MiNT kompatibel zu dem kernel time keeping model
aus der RFC1305 zu machen. Dieses Modell wurde erfolgreich in
Betriebssystemen wie SunOS, Ultrix, OSF/1, HP-UX und Linux umgesetzt.
Es ist zu erwarten, daß sich die interen Realsierung in Zukunft
ändert.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Der Aufruf kann nicht fehlschlagen, es wird immer <a href="005003.html#E_OK">E_OK</a>
zurückgeliefert.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Verfügbar, wenn ein MiNT Kernel mit einer Versionsnummer von
mindestens 1.15.0 erkannt wird.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20Tgettimeofday">Binding</a> &nbsp; <a href="00500e.html#Ssystem">Ssystem</a> &nbsp; <a href="#Tsettimeofday">Tsettimeofday</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tgettimeofday"></a>5.10.4.1 Bindings für Tgettimeofday</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Tgettimeofday">Tgettimeofday</a> ( <a href="005014.html#timeval">timeval</a> *tv, <a href="005014.html#timezone">timezone</a> *tzp );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>pea       tzp          ; Offset 6
pea       tv           ; Offset 2
move.w    #341,-(sp)   ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a> aufrufen
lea       $0a(sp),sp   ; Stack korrigieren
</pre>


</td></tr>
</table>

<h3><a name="Tmalarm"></a>5.10.5 Tmalarm</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Tmalarm« - interrogates the state of the internal, high
resolution system clock.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top">317 (0x013d)</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int32_t Tmalarm( int32_t time );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">This function reads/sets a process alarm for the current
process.<br><br>

<i>time</i> specifies the length of time (in milliseconds) to
wait before a <a href="005007.html#SIGALRM">SIGALRM</a> signal is delivered. If time is 0 then any
previously set alarm is cancelled. If time is negative the function
does not modify any alarm currently set.<br><br>

If no SIGALRM signal handler has been set up when the alarm is
triggered, the process will be killed.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Returns 0 if no alarm was scheduled prior to this call or the
amount of time remaining (in milliseconds) before the alarm is
triggered.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Available when a 'MiNT' cookie with a version of at least 1.10
exists.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tmalarm">Binding</a> &nbsp; <a href="#Talarm">Talarm</a> &nbsp; <a href="00500b.html#Pause">Pause</a> &nbsp; <a href="00500b.html#Psignal">Psignal</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tmalarm"></a>5.10.5.1 Bindings für Tmalarm</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Tmalarm">Tmalarm</a>( int32_t time );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.l    time,-(sp)   ; Offset 2
move.w    #341,-(sp)   ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>


</td></tr>
</table>

<h3><a name="Tsetdate"></a>5.10.6 Tsetdate</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»set date« - Tagesdatum setzen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top">43</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int16_t Tsetdate ( uint16_t date );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die <a href="005.html">GEMDOS</a>-Routine Tsetdate setzt das aktuelle Tagesdatum. Der
Parameter <i>date</i> ist wie folgt codiert:<table>
<tr><td nowrap="nowrap" valign="top">Bits</td>
<td valign="top">Bedeutung</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">0-4</td>
<td valign="top">Tag (1-31)</td></tr>

<tr><td nowrap="nowrap" valign="top">5-8</td>
<td valign="top">Monat (1-12)</td></tr>

<tr><td nowrap="nowrap" valign="top">9-15</td>
<td valign="top">Jahr (0-119, 0= 1980)

</td></tr>
</table>

<br><br>

<b>Hinweis:</b> Ab dem Blitter-<a href="002.html">TOS</a> wird das Datum auch in der
jeweils vorhandenen Hardware-Uhr gesetzt.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Ein Rückgabewert von -1 kennzeichnet ein ungültiges Format
des Datums.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Alle <a href="005.html">GEMDOS</a> Versionen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tsetdate">Binding</a> &nbsp; <a href="#Tgetdate">Tgetdate</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tsetdate"></a>5.10.6.1 Bindings für Tsetdate</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">uint32_t <a href="#Tsetdate">Tsetdate</a> ( uint16_t date );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    date,-(sp)   ; Offset 2
move.w    #43,-(sp)    ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a> aufrufen
addq.l    #4,sp        ; Stack korrigieren
</pre>


</td></tr>
</table>

<h3><a name="Tsetitimer"></a>5.10.7 Tsetitimer</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Tsetitimer« - steuert einen periodischen Timer.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top">329 (0x0149)</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int32_t Tsetitimer ( int16_t which, int32_t *interval, int32_t
*value, int32_t *ointerval, int32_t *ovalue );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die <a href="005.html">GEMDOS</a>-Routine Tsetitimer steuert einen von insgesamt drei
möglichen periodischen Timern. Es gilt:<table>
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top">Bedeutung</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">which</td>
<td valign="top">gewünschter Timer<table>
<a name="ITIMER_REAL"></a>
<tr><td nowrap="nowrap" valign="top">0 =</td>
<td valign="top">Dieser Timer arbeitet in Echtzeit, und sendet nach Ablauf das
Signal <a href="005007.html#SIGALRM">SIGALRM</a>.<a name="ITIMER_VIRTUAL"></a>
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top">Dieser Timer arbeitet in 'virtueller Prozess-Zeit', und sendet
nach Ablauf das Signal <a href="005007.html#SIGVTALRM">SIGVTALRM</a>. Der Timer läuft in diesem Fall nur,
wenn der Prozess, welcher den Timer steuert, aktuell die CPU besitzt.<a name="ITIMER_PROF"></a>
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 =</td>
<td valign="top">Dieser Timer arbeitet sowohl in 'virtueller Prozess-Zeit' als
auch dann, wenn das Betriebssystem selbst aktiv ist. Nach Ablauf des
Timers wird das Signal <a href="005007.html#SIGPROF">SIGPROF</a> gesendet.
</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">interval</td>
<td valign="top">Adresse eines Long-Wertes, welcher den Wert enthält, auf den
der Timer nach Ablauf gesetzt werden soll. Ein NULL-Zeiger bedeutet,
daß der entsprechende alte Wert nicht verändert werden soll. Falls
der int32_t-Wert den Wert 0 besitzt, wird der Timer nach seinem Ablauf
deaktiviert.</td></tr>

<tr><td nowrap="nowrap" valign="top">value</td>
<td valign="top">Adresse eines Long-Wertes, welcher den Initialwert des Timers
in Millisekunden beschreibt. Ein NULL-Zeiger läßt den aktuellen
Timer unangetastet. Falls der int32_t-Wert den Wert 0 besitzt, wird
der Timer deaktiviert.</td></tr>

<tr><td nowrap="nowrap" valign="top">ointerval</td>
<td valign="top">Adresse eines Long-Wertes, welcher das aktuelle Intervall des
Timers aufnimmt, bzw. NULL, wenn dieser Wert nicht von Interesse ist.</td></tr>

<tr><td nowrap="nowrap" valign="top">ovalue</td>
<td valign="top">Adresse eines Long-Wertes, welcher den aktuellen Wert des
Timers aufnimmt oder NULL, wenn dieser Wert nicht von Interesse ist.

</td></tr>
</table>

<br><br>

Da alle internen Berechnungen in Millisekunden gemessen werden,
ist es nicht möglich einen Timer auf beliebige (sehr große,
zukünftige) Werte zu setzen.<br><br>

Setting new interval values needs root privileges.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Die Funktion liefert bei korrekter Ausführung 0, und im
Fehlerfall einen negativen Wert zurück.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Diese Funktion ist optional, daher darf ein Aufruf mit <a href="005003.html#EINVFN">EINVFN</a>
beantwortet werden. Sie ist verfügbar, wenn 'MiNT' Cookie mit einer
Versionsnummer von mindestens 1.11 existiert.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20Tsetitimer">Binding</a> &nbsp; <a href="00500b.html#Pause">Pause</a> &nbsp; <a href="00500b.html#Psignal">Psignal</a> &nbsp; <a href="#Talarm">Talarm</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tsetitimer"></a>5.10.7.1 Bindings für Tsetitimer</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Tsetitimer">Tsetitimer</a> ( int16_t which, int32_t *interval, int32_t
*value, int32_t *ointerval, int32_t *ovalue );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.l    ovalue,-(sp)    ; Offset 16
move.l    ointerval,-(sp) ; Offset 12
move.l    value,-(sp)     ; Offset  8
move.l    interval,-(sp)  ; Offset  4
move.w    which,-(sp)     ; Offset  2
move.w    #329,-(sp)      ; Offset  0
trap      #1              ; <a href="005.html">GEMDOS</a> aufrufen
lea       $16(sp),sp      ; Stack korrigieren
</pre>


</td></tr>
</table>

<h3><a name="Tsettime"></a>5.10.8 Tsettime</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»set time« - setzt die Uhrzeit.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top">45</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int16_t Tsettime ( uint16_t time );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">Die <a href="005.html">GEMDOS</a>-Routine Tsettime setzt die Uhrzeit. Der Parameter
<i>time</i> muß wie folgt codiert werden:<table>
<tr><td nowrap="nowrap" valign="top">Bits</td>
<td valign="top">Bedeutung</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top">&nbsp;</td></tr>

<tr><td nowrap="nowrap" valign="top">0-4</td>
<td valign="top">Sekunden im Zweierschritt (0-29)</td></tr>

<tr><td nowrap="nowrap" valign="top">5-10</td>
<td valign="top">Minuten (0-59)</td></tr>

<tr><td nowrap="nowrap" valign="top">11-15</td>
<td valign="top">Stunden (0-23)

</td></tr>
</table>

<br><br>

<b>Hinweis:</b> Ab dem Blitter-<a href="002.html">TOS</a> 1.02 wird die Zeit auch in der
jeweils vorhandenen Hardware-Uhr gesetzt.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">Ein Rückgabewert von -1 kennzeichnet ein ungültiges
Zeitformat.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Alle GEMDOS Versionen.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"><a href="#Bindings_20f_C3_BCr_20Tsettime">Binding</a> &nbsp; <a href="#Tgettime">Tgettime</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tsettime"></a>5.10.8.1 Bindings für Tsettime</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int16_t <a href="#Tsettime">Tsettime</a> ( uint16_t time );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>move.w    time,-(sp)   ; Offset 2
move.w    #45,-(sp)    ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a> aufrufen
addq.l    #4,sp        ; Stack korrigieren
</pre>


</td></tr>
</table>

<h3><a name="Tsettimeofday"></a>5.10.9 Tsettimeofday</h3>
<table>
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top">»Tsettimeofday« - sets the state of the internal, high
resolution system clock.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top">342 (0x0156)</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top">int32_t Tsettimeofday ( <a href="005014.html#timeval">timeval</a> *tv, <a href="005014.html#timezone">timezone</a> *tzp );</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">This function sets the state of the internal, high resolution
system clock.<br><br>

The argument <i>tv</i> is a pointer to the <a href="005014.html#timeval">timeval</a> structure.<br><br>

The argument <i>tzp</i> is a pointer to the <a href="005014.html#timezone">timezone</a> structure.<br><br>

You may safely pass NULL for either argument. This isn't
considered an error.<br><br>

Implementors of library bindings should be aware that the
definition of struct timezone is non-standard. The members are actually
int and not long int (this applies only to struct timezone; the members
of struct timeval are always long). 16-bit libraries will have to copy
the contents of the structure that tzp points to.<br><br>

The tz_dsttime member of timezone is stored, but not evaluated
within the kernel. Beware not to misunderstand its meaning: if
non-zero it simply signifies that daylight savings time apply during
some part of the year, not necessarily now. In other words: if it is
non-zero someday, it should be non-zero during the entire year. The
<a href="00500e.html#Ssystem">Ssystem</a>() call has a command <a href="00500e.html#S_CLOCKMODE">S_CLOCKMODE</a>. This command allows to
retrieve or set the kernel clock mode, i.e. to specify whether the
hardware clock is meant to run in UTC or in local time.
<br>It is planned to make MiNT compliant with the kernel time keeping
model described in RFC1305. This model is already successfully
implemented in operating systems such as SunOS, Ultrix, OSF/1, HP-UX
and Linux. Please expect the internal realization to change in the
future.</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top">The following error conditions are defined:<br><br>

<a href="005003.html#EPERM">EPERM</a> - an attempt was made by a user without super-user
privileges to change the system time or system time zone information.<br><br>

<a href="005003.html#EBADARG">EBADARG</a> - one of the arguments is out of range. Note that the
kernel time cannot be set to dates before Jan 1 1980 00:00:00 and
after some day in 2038 (yep, MAX_LONG seconds since the epoch).
Timezone offsets must be in the range of +/- 720 minutes.</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top">Available when a MiNT kernel of a version at least 1.15.0
release is detected.</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"><a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a></td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tsettimeofday">Binding</a> &nbsp; <a href="00500e.html#Ssystem">Ssystem</a> &nbsp; <a href="#Tgettimeofday">Tgettimeofday</a>

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tsettimeofday"></a>5.10.9.1 Bindings für Tsettimeofday</h4>
<table>
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">int32_t <a href="#Tsettimeofday">Tsettimeofday</a> ( <a href="005014.html#timeval">timeval</a> *tv, <a href="005014.html#timezone">timezone</a> *tzp );</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top"><pre>pea       tzp          ; Offset 6
pea       tv           ; Offset 2
move.w    #342,-(sp)   ; Offset 0
trap      #1           ; <a href="005.html">GEMDOS</a> aufrufen
lea       $0a(sp),sp   ; Stack korrigieren
</pre>


</td></tr>
</table>

<hr>

<a id="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a><a id="UDO_nav_up_FOOT" href="005.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24"></a><a id="UDO_nav_lf_FOOT" href="005009.html"><img src="udo_lf.gif" alt="Dateifunktionen" title="Dateifunktionen" border="0" width="24" height="24"></a><a id="UDO_nav_rg_FOOT" href="00500b.html"><img src="udo_rg.gif" alt="Prozessfunktionen" title="Prozessfunktionen" border="0" width="24" height="24"></a></body>
</html>
